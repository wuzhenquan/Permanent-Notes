<html>
  <body>
    <button tag="login" id="button">点击打开登录浮层</button>
  </body>
  <script>
    // 装饰者
    Function.prototype.after = function (afterfn) {
      const __self = this;
      return function () {
        const ret = __self.apply(this, arguments);
        afterfn.apply(this, arguments);
        return ret;
      };
    };

    const showLogin = () => console.log("打开登录浮层");

    // 职责: 数据上报
    const log = function () {
      console.log("上报标签为: " + this.getAttribute("tag"));
    };

    // 把 log 函数用装饰者 after 「动态装饰」到业务数据上面
    document.getElementById("button").onclick = showLogin.after(log);
  </script>
</html>
