<body>
  选择颜色：<select id="colorSelect">
    <options value="">请选择</options>
    <option value="red">红色</option>
    <option value="blue">蓝色</option>
  </select>
  选择内存：<select id="memorySelect">
    <options value="">请选择</options>
    <option value="32G">32G</option>
    <option value="16G">16G</option>
  </select>
  输入购买数量：<input type="text" id="numberInput" /> 您选择了颜色：
  <div id="colorInfo"></div>
  <br />
  您输入了数量：
  <div id="" numberInfo></div>
  <br />
  <button id="nextBtn" disabled="true">请选择手机颜色和购买数量</button>
</body>
<script>
  const goods = { red: 3, blue: 6 };

  const colorSelect = document.getElementById("colorSelect");
  const numberInput = document.getElementById("numberInput");
  const colorInfo = document.getElementById("colorInfo");
  const numberInfo = document.getElementById("numberInfo");
  const nextBtn = document.getElementById("nextBtn");

  const mediator = (function () {
    return {
      changed(obj) {
        const color = colorSelect.value;
        const number = numberInput.value;
        const stock = goods[color];

        if (obj === colorSelect) {
          colorInfo.innerHTML = color;
        } else if (obj === numberInput) {
          numberInfo.innerHTML = number;
        }

        if (!color) {
          nextBtn.disabled = true;
          nextBtn.innerHTML = "请选择手机颜色";
          return;
        }

        if (!memory) {
          nextBtn.disabled = true;
          nextBtn.innerHTML = "请选择内存大小";
          return;
        }

        // 用户输入的购买数量是否为正整数
        if (((number - 0) | 0) !== number - 0) {
          nextBtn.disabled = true;
          nextBtn.innerHTML = "请输入正确的购买数量";
          return;
        }

        // 当前选择数量没有超过库存数量
        if (number > stock) {
          nextBtn.disabled = true;
          nextBtn.innerHTML = "库存不足";
          return;
        }
      },
    };
  })();

  // 事件函数
  colorSelect.onchange = function () {
    mediator.changed(this);
  };
  memorySelect.onchange = function () {
    mediator.changed(this);
  };
  numberInput.oninput = function () {
    mediator.changed(this);
  };
</script>
