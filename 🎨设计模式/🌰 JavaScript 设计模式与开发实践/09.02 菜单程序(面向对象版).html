<body>
  <!-- 写 UI 的 A  -->
  <button id="button1">点击按钮1</button>
  <button id="button2">点击按钮2</button>
  <button id="button3">点击按钮3</button>
</body>
<script>
  /* ------------------------- 写 UI 的 同学 A ------------------------- */
  const button1 = document.getElementById("button1");
  const button2 = document.getElementById("button2");
  const button3 = document.getElementById("button3");

  /* ------------------------- 写点击按钮之后的具体行为的同学 B ------------------------- */
  const MenuBarReceiver = {
    refresh: () => console.log("刷新菜单目录"),
  };

  const SubMenuReceiver = {
    add: () => console.log("增加子菜单"),
    del: () => console.log("删除子菜单"),
  };

  // 编写命令(面向对象的方式)
  // receiver 被当成 commander 的属性保存起来
  // 同时约定执行命令的操作调用 command.execute 方法
  const RefreshMenuBarCommand = function (receiver) {
    this.receiver = receiver;
  };
  RefreshMenuBarCommand.prototype.execute = function () {
    this.receiver.refresh();
  };

  const AddSubMenuCommand = function (receiver) {
    this.receiver = receiver;
  };
  AddSubMenuCommand.prototype.execute = function () {
    this.receiver.add();
  };

  const DelSubMenuCommand = function (receiver) {
    return {
      execute: () => {
        receiver.del();
      },
    };
  };
  DelSubMenuCommand.prototype.execute = function () {
    console.log("删除子菜单");
  };

  /* ------------------------- 安装命令 ------------------------- */
  const setCommand = (button, command) => {
    button.onclick = () => comand.execute();
  };

  const refreshMenuBarCommand = new RefreshMenuBarCommand(MenuBarReceiver);
  const addSubMenuCommand = new AddSubMenuCommand(SubMenuReceiver);
  const delSubMenuCommand = new DelSubMenuCommand(SubMenuReceiver);
  setCommand(button1, refreshMenuBarCommand);
  setCommand(button2, addSubMenuCommand);
  setCommand(button3, delSubMenuCommand);
</script>
