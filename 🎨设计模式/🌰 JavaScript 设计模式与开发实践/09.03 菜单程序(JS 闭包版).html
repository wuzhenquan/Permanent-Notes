<body>
  <!-- 写 UI 的 A  -->
  <button id="button1">点击按钮1</button>
  <button id="button2">点击按钮2</button>
  <button id="button3">点击按钮3</button>
</body>
<script>
  /* ------------------------- 写 UI 的 A ------------------------- */
  const button1 = document.getElementById("button1");
  const button2 = document.getElementById("button2");
  const button3 = document.getElementById("button3");

  /* ------------------------- 写点击按钮之后的具体行为的 B ------------------------- */
  const MenuBarReceiver = {
    refresh: () => console.log("刷新菜单目录"),
  };

  const SubMenuReceiver = {
    add: () => console.log("增加子菜单"),
    del: () => console.log("删除子菜单"),
  };

  // 编写命令(闭包的方式)
  // receiver 被封闭在闭包产生的环境中
  // 仅仅执行回调函数即可
  const generateRefreshMenuBarCommand = function (receiver) {
    return { execute: () => receiver.refresh() };
  };

  const generateAddSubMenuCommand = function (receiver) {
    return { execute: () => receiver.add() };
  };

  const generateDelSubMenuCommand = function (receiver) {
    return { execute: () => receiver.del() };
  };

  /* ------------------------- 安装命令 ------------------------- */
  const setCommand = (button, command) => {
    button.onclick = () => comand.execute();
  };

  const refreshMenuBarCommand = generateRefreshMenuBarCommand(MenuBarReceiver);
  const addSubMenuCommand = generateAddSubMenuCommand(SubMenuReceiver);
  const delSubMenuCommand = generateDelSubMenuCommand(SubMenuReceiver);

  setCommand(button1, refreshMenuBarCommand);
  setCommand(button2, addSubMenuCommand);
  setCommand(button3, delSubMenuCommand);
</script>
