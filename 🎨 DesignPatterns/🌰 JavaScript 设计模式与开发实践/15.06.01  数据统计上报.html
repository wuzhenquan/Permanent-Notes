<html>
  <button tag="login" id="button">点击打开登录浮层</button>

  <script>
    const log = function (tag) {
      console.log("上报标签为：" + tag);
    };

    const showLogin = function () {
      console.log("打开登录浮层"); // 既要负责打开登录浮层
      log(this.getAttribute("tag")); // 又要负责数据上报
    };

    document.getElementById("button").onclick = showLogin;
  </script>
</html>

<!----------  AOP 分离一下  ---------->

<html>
  <button tag="login" id="button">点击打开登录浮层</button>

  <script>
    Function.prototype.after = function (afterfn) {
      const _self = this;
      return function () {
        const ret = _self.apply(this, arguments);
        afterfn.apply(this, arguments);
        return ret;
      };
    };

    const log = function () {
      console.log(`上报标签为：${this.getAttribute("tag")}`);
    };

    let showLogin = () => console.log("打开登录浮层");

    showLogin = showLogin.after(log); // 打开浮层之后上报的数据

    document.getElementById("button").onclick = showLogin;
  </script>
</html>
