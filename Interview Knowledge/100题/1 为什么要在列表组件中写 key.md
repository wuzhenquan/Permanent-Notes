### 写 React / Vue 项目时为什么要在列表组件中写 key，其作用是什么？

**关键词**：`diff`

**需要了解**：diff 算法过程

- key不是用来提升react的性能的，不过用好 key 对性能是有帮组的。
- 加 key 是为了特异性识别 如果不加key 就相当于 你的元素里面没有加id 编号 做增删改查 只会默认按照排序索引进行增删改查 然后 就会导致业务逻辑 跟你的试图操作有出入 你会说 咦我想编辑第二个 为何第一个没了
- key相同，若组件属性有所变化，则react只更新组件对应的属性；没有变化则不更新。
- key值不同，则react先销毁该组件(有状态组件的componentWillUnmount会执行)，然后重新创建该组件（有状态组件的constructor和componentWillUnmount都会执行）



react 更新组件的方式是自上而下的，每次小的改动都会生成一个全新的vdom。从而进行diff，如果不写key，可能就会发生本来应该更新却没有更新的bug。写不写key能够提高性能的根本在于一方面diff算法会优先判断key是否相同，如果相同则不进行后面的运算。 如果key相同，就更好了，根本不需要重新创建节点。

diff 算法在你的`复杂`的列表`稳定`的时候不用 key 能够明显提高性能，因为节点可以重用。

对于列表`频繁更新`的场景， 节点不能重用，但是diff 可以`省略一部分逻辑`，因此性能也会更好。

